let numbersContainer=document.querySelector(".numbers"),oneNumber="";function drawCards(e){let r=document.querySelector(".numbers");for(let t=0;t<e.length;t++)oneNumber=`<div class="number">\n            <p class="number__picture">\n                <img src= ${e[t].image} alt="" width="270">\n            </p>\n            <div class="number__content">\n    <h5 class="number__title">${e[t].title}</h5>\n    <p class="number__size">Размеры (ШхГхВ) - ${e[t].size} см</p>\n    <p class="number__area">Площадь - ${e[t].area} м2</p>\n    <div class="equipment__wrapper">\n        <p class="number__equipment">Оснащение номера</p>\n        <div class="equipment__pics">${e[t].equipment}</div>\n    </div>\n    <p class="number__price">Цена за сутки: <span class="price__item"> ${e[t].price} ₽</span></p>\n    <button class="button button-colored book-button">Забронировать</button></div>\n    </div>`,r.innerHTML+=oneNumber}function sortByPriceDown(){numbersArray.sort((e,r)=>Number(e.price)<Number(r.price)?1:-1),numbersContainer.innerHTML="",drawCards(numbersArray)}function sortByPriceUp(){numbersArray.sort((e,r)=>Number(e.price)>Number(r.price)?1:-1),numbersContainer.innerHTML="",drawCards(numbersArray)}function sortByAreaUp(){numbersArray.sort((e,r)=>Number(e.area)>Number(r.area)?1:-1),numbersContainer.innerHTML="",drawCards(numbersArray)}function sortByAreaDown(){numbersArray.sort((e,r)=>Number(e.area)<Number(r.area)?1:-1),numbersContainer.innerHTML="",drawCards(numbersArray)}window.onload=drawCards(numbersArray);let select=document.querySelector("#select__list");select.addEventListener("change",(function(e){switch(console.log(select.value),select.value){case"priceDown":sortByPriceDown();break;case"priceUp":sortByPriceUp();break;case"areaUp":sortByAreaUp();break;case"areaDown":sortByAreaDown();break;default:sortByAreaUp()}}));let burger=document.querySelector(".burger"),mobileMenu=document.querySelector(".navigation__list");burger.addEventListener("click",(function(){mobileMenu.classList.toggle("show-nav")}));let showFilterButton=document.querySelector(".show-filter__button"),filter=document.querySelector(".filter"),blurBackground=document.querySelector(".popup-background"),filterCross=document.querySelector(".filter__cross");function closeFilter(){filter.classList.remove("show-filter"),blurBackground.classList.remove("show-blur")}showFilterButton.addEventListener("click",(function(){filter.classList.add("show-filter"),blurBackground.classList.add("show-blur")})),filterCross.addEventListener("click",closeFilter),document.addEventListener("keydown",(function(e){27===e.keyCode&&closeFilter()})),blurBackground.addEventListener("click",closeFilter);let bookPopup=document.querySelector(".book-popup"),bookCross=document.querySelector(".book__cross"),bookForm=document.querySelector(".book__form");numbersContainer.addEventListener("click",(function(e){console.log(e.target),e.target.classList.contains("book-button")&&(blurBackground.classList.add("show-blur"),bookPopup.classList.add("show-book-popup"),bookForm.addEventListener("submit",(function(e){console.log("start ajax"),e.preventDefault();let r=new XMLHttpRequest;r.open("POST","server.php"),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded");let t=new FormData(bookForm);r.send(t);let n=document.createElement("div");bookPopup.append(n),r.addEventListener("readystatechange",(function(){r.readyState<4?n.innerHTML="Загрузка...":4===r.readyState&&200==r.status?(n.innerHTML="Номер забронирован",bookForm.reset()):n.innerHTML="Что-то пошло не так"}))})))})),bookCross.addEventListener("click",(function(){blurBackground.classList.remove("show-blur"),bookPopup.classList.remove("show-book-popup")}));let filterForm=document.querySelector(".filter__form"),resetFilterButton=document.querySelector(".reset-button"),afterFilterArray=[],finalFilterArray=[];var filterFeatures={};let nativeCheckboxes=document.querySelectorAll(".native-checkbox");resetFilterButton.addEventListener("click",(function(e){e.preventDefault(),filterForm.reset(),numbersContainer.innerHTML="",drawCards(numbersArray)})),filterForm.addEventListener("submit",(function(e){e.preventDefault();let r=document.querySelector("input[name=start-price]").value,t=document.querySelector("input[name=finish-price]").value;filterFeatures[r]=r,filterFeatures[t]=t;for(let e=0;e<nativeCheckboxes.length;e++){let r=nativeCheckboxes[e].getAttribute("id");nativeCheckboxes[e].checked?filterFeatures[r]=!0:filterFeatures[r]=!1}for(key in console.log(filterFeatures),filterFeatures)for(let e=0;e<numbersArray.length;e++)1==filterFeatures[key]&&1==numbersArray[e][key]&&-1==afterFilterArray.indexOf(numbersArray[e])&&afterFilterArray.push(numbersArray[e]);for(let e=0;e<afterFilterArray.length;e++)afterFilterArray[e].price>=r&&afterFilterArray[e].price<=t&&finalFilterArray.push(afterFilterArray[e]);numbersContainer.innerHTML="",drawCards(finalFilterArray)}));